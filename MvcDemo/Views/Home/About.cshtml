@using System.Reflection
@using Coralcode.Framework.Extensions
@using MvcDemo.Models
@model JavaInterfaceModel

@Model.PackageName

@foreach (var item in Model.ImportList)
{
    @item
}

public interface @Model.InterfaceName {

@foreach (var method in Model.MethodList)
{
    var parameterList = method.GetParameters();
    //返回类型
    var returnTypeName = "";
    switch (method.ReturnType.Namespace)
    {
        case "System.Collections.Generic":
            var genericArgument = method.ReturnType.GetGenericArguments().FirstOrDefault();
            returnTypeName = genericArgument == null ? "void" : "List<" + genericArgument.Name + ">";
            break;
        default:
            returnTypeName = "void";
            break;
    }
    var methodStr = returnTypeName + " " + method.Name + "({0})";
    if (!parameterList.Any())
    {
        methodStr = string.Format(methodStr, "");
    }
    else
    {
        var isGet = parameterList.All(item => item.ParameterType.IsSimpleUnderlyingType());
        var getParameters = new List<string>();
        if (isGet)
        {
            //get
            foreach (var parameterInfo in parameterList)
            {
                getParameters.Add("@RequestParam(\"" + parameterInfo.Name + "\") " + parameterInfo.ParameterType.Name + " " + parameterInfo.Name);
            }
        }
        else
        {
            //post
            foreach (var parameterInfo in parameterList)
            {
                getParameters.Add(parameterInfo.ParameterType.Name + " " + parameterInfo.Name);
            }
        }
        methodStr = string.Format(methodStr, string.Join(", ", getParameters));
    }
    @Html.Raw(methodStr)
}
}